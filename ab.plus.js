!function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,t){/*@version: 5.7.0
							@date: 2019-2-18 18:47:15*/
var o=function(e){return null!=e&&void 0!=e},r=function(e){return!o(e)},a=function(e){return e===!0},s=function(e){return e===!1},c=function(e){return"function"==typeof e},d=function(e){return"number"==typeof e},u=function(e){return"[object array]"===Object.prototype.toString.call(e).toLowerCase()},l=function(e){return"object"==("undefined"==typeof e?"undefined":n(e))&&"[object object]"==Object.prototype.toString.call(e).toLowerCase()&&null!=e},f=function(e){return"string"==typeof e},h=function(e,t){for(var i=arguments.length,n=Array(i>2?i-2:0),o=2;o<i;o++)n[o-2]=arguments[o];return function(){for(var i=arguments.length,o=Array(i),r=0;r<i;r++)o[r]=arguments[r];e.apply(t,n.concat(o))}},p=function(){var t;e.console&&c(e.console.warn)?(t=e.console).warn.apply(t,arguments):null},m=function(t){e.console&&c(e.console.warn)?e.console.warn(t):null};e.JSON?null:e.JSON={};var g=function(){var e,t,i,o,r={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"\t"},a=function(t){throw{name:"SyntaxError",message:t,at:e,text:i}},s=function(n){return n&&n!==t&&a("Expected '"+n+"' instead of '"+t+"'"),t=i.charAt(e),e+=1,t},c=function(){var e,i="";for("-"===t&&(i="-",s("-"));t>="0"&&t<="9";)i+=t,s();if("."===t)for(i+=".";s()&&t>="0"&&t<="9";)i+=t;if("e"===t||"E"===t)for(i+=t,s(),"-"!==t&&"+"!==t||(i+=t,s());t>="0"&&t<="9";)i+=t,s();return e=+i,isFinite(e)?e:void a("Bad number")},d=function(){var e,i,n,o="";if('"'===t)for(;s();){if('"'===t)return s(),o;if("\\"===t)if(s(),"u"===t){for(n=0,i=0;i<4&&(e=parseInt(s(),16),isFinite(e));i+=1)n=16*n+e;o+=String.fromCharCode(n)}else{if("string"!=typeof r[t])break;o+=r[t]}else o+=t}a("Bad string")},u=function(){for(;t&&t<=" ";)s()},l=function(){switch(t){case"t":return s("t"),s("r"),s("u"),s("e"),!0;case"f":return s("f"),s("a"),s("l"),s("s"),s("e"),!1;case"n":return s("n"),s("u"),s("l"),s("l"),null}a("Unexpected '"+t+"'")},f=function(){var e=[];if("["===t){if(s("["),u(),"]"===t)return s("]"),e;for(;t;){if(e.push(o()),u(),"]"===t)return s("]"),e;s(","),u()}}a("Bad array")},h=function(){var e,i={};if("{"===t){if(s("{"),u(),"}"===t)return s("}"),i;for(;t;){if(e=d(),u(),s(":"),Object.hasOwnProperty.call(i,e)&&a("Duplicate key '"+e+"'"),i[e]=o(),u(),"}"===t)return s("}"),i;s(","),u()}}a("Bad object")};return o=function(){switch(u(),t){case"{":return h();case"[":return f();case'"':return d();case"-":return c();default:return t>="0"&&t<="9"?c():l()}},function(r,s){var c;return i=r,e=0,t=" ",c=o(),u(),t&&a("Syntax error"),"function"==typeof s?function d(e,t){var i,o,r=e[t];if(r&&"object"===("undefined"==typeof r?"undefined":n(r)))for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(o=d(r,i),void 0!==o?r[i]=o:delete r[i]);return s.call(e,t,r)}({"":c},""):c}}(),v={stringify:e.JSON.stringify||function(e){var t="undefined"==typeof e?"undefined":n(e);if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var i,o,r=[],a=e&&e.constructor==Array;for(i in e)o=e[i],t="undefined"==typeof o?"undefined":n(o),"string"==t?o='"'+o+'"':"object"==t&&null!==o&&(o=v.stringify(o)),"function"!=t&&r.push((a?"":'"'+i+'":')+String(o));return(a?"[":"{")+String(r)+(a?"]":"}")},parse:e.JSON.parse||g},w={each:function(e,t){var i=e&&e.hasOwnProperty("length")?e.length:0;if(i)for(var n=0;n<i&&t(e[n],n)!==!1;n++);},indexOf:function(e,t){var i=e.length>>>0,n=Number(arguments[1])||0;for(n=n<0?Math.ceil(n):Math.floor(n),n<0&&(n+=i);n<i;n++)if(n in e&&e[n]===t)return n;return-1},uniquePush:function(e,t){w.indexOf(e,t)===-1&&e.push(t)}},y={keys:Object.keys||function(e){var t=[];for(var i in e)t.push(i);return t},assign:Object.assign||function(){for(var e=arguments[0],t=1,i=arguments.length;t<i;t++)for(var n in arguments[t])e[n]=arguments[t][n];return e}},b=function(e){function t(e,t){p.add(e,t),h||(h=g(p.drain))}function i(e){var t,i="undefined"==typeof e?"undefined":n(e);return null==e||"object"!=i&&"function"!=i||(t=e.then),"function"==typeof t&&t}function o(){for(var e=0;e<this.chain.length;e++)r(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function r(e,t,n){var o,r;try{t===!1?n.reject(e.msg):(o=t===!0?e.msg:t.call(void 0,e.msg),o===n.promise?n.reject(TypeError("Promise-chain cycle")):(r=i(o))?r.call(o,n.resolve,n.reject):n.resolve(o))}catch(a){n.reject(a)}}function a(e){var n,r=this;if(!r.triggered){r.triggered=!0,r.def&&(r=r.def);try{(n=i(e))?t(function(){var t=new d(r);try{n.call(e,function(){a.apply(t,arguments)},function(){s.apply(t,arguments)})}catch(i){s.call(t,i)}}):(r.msg=e,r.state=1,r.chain.length>0&&t(o,r))}catch(c){s.call(new d(r),c)}}}function s(e){var i=this;i.triggered||(i.triggered=!0,i.def&&(i=i.def),i.msg=e,i.state=2,i.chain.length>0&&t(o,i))}function c(e,t,i,n){for(var o=0;o<t.length;o++)!function(o){e.resolve(t[o]).then(function(e){i(o,e)},n)}(o)}function d(e){this.def=e,this.triggered=!1}function u(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}function l(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var i=new u(this);this.then=function(e,n){var r={success:"function"!=typeof e||e,failure:"function"==typeof n&&n};return r.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");r.resolve=e,r.reject=t}),i.chain.push(r),0!==i.state&&t(o,i),r.promise},this["catch"]=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){a.call(i,e)},function(e){s.call(i,e)})}catch(n){s.call(i,n)}}var f,h,p,m=Object.prototype.toString,g="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),f=function(e,t,i,n){return Object.defineProperty(e,t,{value:i,writable:!0,configurable:n!==!1})}}catch(v){f=function(e,t,i){return e[t]=i,e}}p=function(){function e(e,t){this.fn=e,this.self=t,this.next=void 0}var t,i,n;return{add:function(o,r){n=new e(o,r),i?i.next=n:t=n,i=n,n=void 0},drain:function(){var e=t;for(t=i=h=void 0;e;)e.fn.call(e.self),e=e.next}}}();var w=f({},"constructor",l,!1);return l.prototype=w,f(w,"__NPO__",0,!1),f(l,"resolve",function(e){var t=this;return e&&"object"==("undefined"==typeof e?"undefined":n(e))&&1===e.__NPO__?e:new t(function(t,i){if("function"!=typeof t||"function"!=typeof i)throw TypeError("Not a function");t(e)})}),f(l,"reject",function(e){return new this(function(t,i){if("function"!=typeof t||"function"!=typeof i)throw TypeError("Not a function");i(e)})}),f(l,"all",function(e){var t=this;return"[object Array]"!=m.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(i,n){if("function"!=typeof i||"function"!=typeof n)throw TypeError("Not a function");var o=e.length,r=Array(o),a=0;c(t,e,function(e,t){r[e]=t,++a===o&&i(r)},n)})}),f(l,"race",function(e){var t=this;return"[object Array]"!=m.call(e)?t.reject(TypeError("Not an array")):new t(function(i,n){if("function"!=typeof i||"function"!=typeof n)throw TypeError("Not a function");c(t,e,function(e,t){i(t)},n)})}),l}(window),x=b,k=e.XMLHttpRequest,E=function(t){var i=t.url,n=t.data,a=t.timeout;return r(a)?a=3e3:"",new x(function(t,s){try{if(r(n)||r(n.app_key))return s("Please pass your appKey in the init method");var d=new k;"withCredentials"in d||(o(e.XDomainRequest)?(d=new e.XDomainRequest,i=i.replace(/http\w*\:/,e.location.protocol)):s("construct $request failed")),d.onload=function(){t(d.responseText)},d.onerror=function(){s(d.responseText||"network failed")},setTimeout(function(){s(i+" timeout")},a),d.open("POST",i,!0),c(d.setRequestHeader)?d.setRequestHeader("Content-Type","application/json;charset=UTF-8"):"",d.send(v.stringify(n))}catch(u){s(u)}})},_={getAllParams:function(){var t=e.location.search,i={};if(t.indexOf("?")!=-1)for(var n=t.replace(/^\?/,"").split("&"),o=n.length,r=0,a=void 0;r<o;r++)n[r]&&(a=n[r].split("="),i[a[0]]=a[1]);return i},getQueryString:function(t,i){if(i=i||e.location.search.substr(1)){var n=null;return w.each(i.split("&"),function(e){if(0==e.indexOf(t+"="))return n=e.split("=")[1],!1}),o(n)?n:null}return null},getProtocol:function(t){if(r(t))return e.location.protocol;var i=t.match(/http\w*\:/);return i&&1==i.length?i[0]:(p("get protocol failed"),"")},getHost:function(t){return r(t)?e.location.host:(t=t.replace(/http\w*\:\/\//,""),t.indexOf("?")>0?t=t.substr(0,t.indexOf("?")):"",t.indexOf("#")>0?t=t.substr(0,t.indexOf("#")):"",t.split("/")[0])},getPath:function(t){if(r(t))return e.location.pathname;var i=t.replace(/http\w*\:\/\//).split("/");return i.shift(),"/"+i.join("/").replace(/[\?|\#]\S*/,"")},getSearch:function(t){if(r(t))return e.location.search;var i=t.split("?")[1];return i?"?"+i.replace(/\#\S+$/,""):""},getHash:function(t){if(r(t))return e.location.hash;var i=t.split("#")[1];return i?"#"+i:""}},S=function(e){if(e){var t=encodeURIComponent(v.stringify(e)),i="https://zhtest.appadhoc.com/l.gif?m="+t+"&t="+Date.now(),n=document.createElement("img");n.src=i}},T="1.0",C=function(e){e+=T;for(var t=encodeURIComponent(e),i=t+"=",n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t)){var a=r.substring(i.length,r.length);return decodeURIComponent(a)}}return null},A=function(e,t,i,n){e+=T;var r=i?1e3*i:31536e6,a=new Date((new Date).getTime()+r),s="; expires="+a.toUTCString(),c=encodeURIComponent(e)+"="+encodeURIComponent(t)+s+"; path=/;";o(n)&&""!=n&&(c+="domain="+n+";"),document.cookie=c},O=function(e,t,i){e+=T;var n=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; path=/;Max-Age=-99999999";o(i)&&""!=i&&(n+="domain="+i+";"),document.cookie=n},N={set:A,get:C},I={getCookies:function(e){for(var t=[],i=encodeURIComponent(e),n=document.cookie.split(";"),o=0;o<n.length;o++){for(var r=n[o];" "==r.charAt(0);)r=r.substring(1);0===r.indexOf(i)&&t.push(r)}return t},delCookies:function(e,t,i){for(var n=0;n<e.length;n++){var o=e[n],r=encodeURIComponent(t+T),a=r+"=";if(0===o.indexOf(r)){var s=o.substring(a.length,o.length);O(t,decodeURIComponent(s),i),O(t,decodeURIComponent(s),"")}}}};try{e.localStorage.setItem("_adhoc_test_",1),N.setItem=function(t,i){e.localStorage.setItem(t,i)},N.getItem=function(t){return e.localStorage.getItem(t)},N.removeItem=function(t){return e.localStorage.removeItem(t)}}catch(L){N.setItem=function(){},N.getItem=function(){},N.removeItem=function(){}}var P={$:function(e){for(var t=e.match(/(\w|\-)+(?=\[)/g),i=e.match(/\d+(?=\])/g),n=document.body,o=0,a=i.length;o<a;o++){var s=t[o].toLowerCase(),c=i[o];if("body"!=s){if(!n)return null;for(var d=n.childNodes,u=-1,l=0,f=d.length;l<f;l++){var h=d[l];if(1===h.nodeType&&h.nodeName.toLowerCase()==s){u++;var p=h.getAttribute(j);if(p==c){n=h,u=p;break}if(r(p)&&u==c){n=h;break}}}if(u!=c){n=null;break}}}return n},addEvent:function(e,t,i,n,o,r){var a=e,s=!!r&&r,c=null;o&&(a=o===!0?n:o),c=function(e){return i.call(a,e||window.event)};try{e.addEventListener(t,c,s)}catch(d){try{e.attachEvent("on"+t,c)}catch(u){e["on"+t]=c}}},findParentNodeByTag:function(e,t){for(;e!=document&&e.parentNode.tagName&&e.parentNode.tagName.toLowerCase()!=t;)e=e.parentNode;return e==document||e.parentNode==document?null:e.parentNode},next:function Ae(e){var Ae=e.nextSibling;if(!Ae)return null;if("#text"===Ae.nodeName&&3===Ae.nodeType)return Ae;for(;Ae&&1!=Ae.nodeType;)Ae=Ae.nextSibling;return Ae},ready:function(e){"function"==typeof e&&setTimeout(function(){return"complete"===t.readyState?e():P.ready(e)},0)},getChildren:function(e,t){for(var i=[],n=e.childNodes,o=0,r=n.length;o<r;o++){var a=n[o];1===a.nodeType&&a.tagName&&"style"!=a.tagName.toLowerCase()&&"script"!=a.tagName.toLowerCase()&&(t?a.tagName&&a.tagName.toLowerCase&&t==a.tagName.toLowerCase()&&i.push(a):i.push(a))}return i},getDoms:function(e){var t=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,i=/^(?:\s*(<[\w\W]+>)[^>]*|.([\w-]*))$/;if(t.test(e)){var n=t.exec(e);return document.getElementById(n[2])}if(i.test(e)){for(var o=i.exec(e),r=document.getElementsByTagName("*"),a=[],s=0,c=r.length;s<c;s++)r[s].className.match(new RegExp("(\\s|^)"+o[2]+"(\\s|$)"))&&a.push(r[s]);return a}},querySelectorPolyfill:function(){document.querySelectorAll||(document.querySelectorAll=function(e){var t,i=document.createElement("style"),n=[];for(document.documentElement.firstChild.appendChild(i),document._qsa=[],i.styleSheet.cssText=e+"{x-qsa:expression(document._qsa && document._qsa.push(this))}",window.scrollBy(0,0),i.parentNode.removeChild(i);document._qsa.length;)t=document._qsa.shift(),t.style.removeAttribute("x-qsa"),n.push(t);return document._qsa=null,n}),document.querySelector||(document.querySelector=function(e){var t=document.querySelectorAll(e);return t.length?t[0]:null})},isChildsOnlyText:function(e){for(var t=e.childNodes,i=void 0,n=0;n<t.length;n++)"#text"!=t[n].nodeName?"BR"!=t[n].nodeName&&(i=!1):i=!0;return i}},M=void 0,D={setName:function(t){e.name=e.ADHOC_WINDOW_NAME=M=t},getName:function(){return M||document.referrer}};D.setName(e.name);var R="data-ab-origin-sequence",j="data-ab-origin-tag-sequence",F=void 0;!function(){var e="0.7.19",t="",i="?",o="function",r="object",a="string",s="major",c="model",d="name",u="type",l="vendor",f="version",h="architecture",p="console",m="mobile",g="tablet",v="smarttv",w="wearable",y="embedded",b={extend:function(e,t){var i={};for(var n in e)t[n]&&t[n].length%2===0?i[n]=t[n].concat(e[n]):i[n]=e[n];return i},has:function(e,t){return"string"==typeof e&&t.toLowerCase().indexOf(e.toLowerCase())!==-1},lowerize:function(e){return e.toLowerCase()},major:function(e){return("undefined"==typeof e?"undefined":n(e))===a?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},x={rgx:function(e,t){for(var i,a,s,c,d,u,l=0;l<t.length&&!d;){var f=t[l],h=t[l+1];for(i=a=0;i<f.length&&!d;)if(d=f[i++].exec(e))for(s=0;s<h.length;s++)u=d[++a],c=h[s],("undefined"==typeof c?"undefined":n(c))===r&&c.length>0?2==c.length?n(c[1])==o?this[c[0]]=c[1].call(this,u):this[c[0]]=c[1]:3==c.length?n(c[1])!==o||c[1].exec&&c[1].test?this[c[0]]=u?u.replace(c[1],c[2]):void 0:this[c[0]]=u?c[1].call(this,u,c[2]):void 0:4==c.length&&(this[c[0]]=u?c[3].call(this,u.replace(c[1],c[2])):void 0):this[c]=u?u:void 0;l+=2}},str:function(e,t){for(var o in t)if(n(t[o])===r&&t[o].length>0){for(var a=0;a<t[o].length;a++)if(b.has(t[o][a],e))return o===i?void 0:o}else if(b.has(t[o],e))return o===i?void 0:o;return e}},k={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},E={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[d,f],[/(opios)[\/\s]+([\w\.]+)/i],[[d,"Opera Mini"],f],[/\s(opr)\/([\w\.]+)/i],[[d,"Opera"],f],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i],[d,f],[/(konqueror)\/([\w\.]+)/i],[[d,"Konqueror"],f],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[d,"IE"],f],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[d,"Edge"],f],[/(yabrowser)\/([\w\.]+)/i],[[d,"Yandex"],f],[/(puffin)\/([\w\.]+)/i],[[d,"Puffin"],f],[/(focus)\/([\w\.]+)/i],[[d,"Firefox Focus"],f],[/(opt)\/([\w\.]+)/i],[[d,"Opera Touch"],f],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[d,"UCBrowser"],f],[/(comodo_dragon)\/([\w\.]+)/i],[[d,/_/g," "],f],[/(micromessenger)\/([\w\.]+)/i],[[d,"WeChat"],f],[/(brave)\/([\w\.]+)/i],[[d,"Brave"],f],[/(qqbrowserlite)\/([\w\.]+)/i],[d,f],[/(QQ)\/([\d\.]+)/i],[d,f],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[d,f],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[d,f],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[d,f],[/(MetaSr)[\/\s]?([\w\.]+)/i],[d],[/(LBBROWSER)/i],[d],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[f,[d,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[f,[d,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[d,f],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[f,[d,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[d,/(.+)/,"$1 WebView"],f],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[d,/(.+(?:g|us))(.+)/,"$1 $2"],f],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[f,[d,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[d,f],[/(dolfin)\/([\w\.]+)/i],[[d,"Dolphin"],f],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[d,"Chrome"],f],[/(coast)\/([\w\.]+)/i],[[d,"Opera Coast"],f],[/fxios\/([\w\.-]+)/i],[f,[d,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[f,[d,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[f,d],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[d,"GSA"],f],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[d,[f,x.str,k.browser.oldsafari.version]],[/(webkit|khtml)\/([\w\.]+)/i],[d,f],[/(navigator|netscape)\/([\w\.-]+)/i],[[d,"Netscape"],f],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[d,f]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[[h,"amd64"]],[/(ia32(?=;))/i],[[h,b.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[[h,"ia32"]],[/windows\s(ce|mobile);\sppc;/i],[[h,"arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[[h,/ower/,"",b.lowerize]],[/(sun4\w)[;\)]/i],[[h,"sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[[h,b.lowerize]]],device:[[/\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i],[c,l,[u,g]],[/applecoremedia\/[\w\.]+ \((ipad)/],[c,[l,"Apple"],[u,g]],[/(apple\s{0,1}tv)/i],[[c,"Apple TV"],[l,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[l,c,[u,g]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[c,[l,"Amazon"],[u,g]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[c,x.str,k.device.amazon.model],[l,"Amazon"],[u,m]],[/android.+aft([bms])\sbuild/i],[c,[l,"Amazon"],[u,v]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[c,l,[u,m]],[/\((ip[honed|\s\w*]+);/i],[c,[l,"Apple"],[u,m]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[l,c,[u,m]],[/\(bb10;\s(\w+)/i],[c,[l,"BlackBerry"],[u,m]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i],[c,[l,"Asus"],[u,g]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[l,"Sony"],[c,"Xperia Tablet"],[u,g]],[/android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i],[c,[l,"Sony"],[u,m]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[l,c,[u,p]],[/android.+;\s(shield)\sbuild/i],[c,[l,"Nvidia"],[u,p]],[/(playstation\s[34portablevi]+)/i],[c,[l,"Sony"],[u,p]],[/(sprint\s(\w+))/i],[[l,x.str,k.device.sprint.vendor],[c,x.str,k.device.sprint.model],[u,m]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[l,c,[u,g]],[/(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[l,[c,/_/g," "],[u,m]],[/(nexus\s9)/i],[c,[l,"HTC"],[u,g]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[c,[l,"Huawei"],[u,m]],[/(microsoft);\s(lumia[\s\w]+)/i],[l,c,[u,m]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[c,[l,"Microsoft"],[u,p]],[/(kin\.[onetw]{3})/i],[[c,/\./g," "],[l,"Microsoft"],[u,m]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[c,[l,"Motorola"],[u,m]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[c,[l,"Motorola"],[u,g]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[l,b.trim],[c,b.trim],[u,v]],[/hbbtv.+maple;(\d+)/i],[[c,/^/,"SmartTV"],[l,"Samsung"],[u,v]],[/\(dtv[\);].+(aquos)/i],[c,[l,"Sharp"],[u,v]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[l,"Samsung"],c,[u,g]],[/smart-tv.+(samsung)/i],[l,[u,v],c],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[l,"Samsung"],c,[u,m]],[/sie-(\w*)/i],[c,[l,"Siemens"],[u,m]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[l,"Nokia"],c,[u,m]],[/android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i],[c,[l,"Acer"],[u,g]],[/android.+([vl]k\-?\d{3})\s+build/i],[c,[l,"LG"],[u,g]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[l,"LG"],c,[u,g]],[/(lg) netcast\.tv/i],[l,c,[u,v]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[c,[l,"LG"],[u,m]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[c,[l,"Lenovo"],[u,g]],[/linux;.+((jolla));/i],[l,c,[u,m]],[/((pebble))app\/[\d\.]+\s/i],[l,c,[u,w]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[l,c,[u,m]],[/crkey/i],[[c,"Chromecast"],[l,"Google"]],[/android.+;\s(glass)\s\d/i],[c,[l,"Google"],[u,w]],[/android.+;\s(pixel c)[\s)]/i],[c,[l,"Google"],[u,g]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[c,[l,"Google"],[u,m]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[c,/_/g," "],[l,"Xiaomi"],[u,m]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[c,/_/g," "],[l,"Xiaomi"],[u,g]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[c,[l,"Meizu"],[u,g]],[/(mz)-([\w-]{2,})/i],[[l,"Meizu"],c,[u,m]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[c,[l,"OnePlus"],[u,m]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[c,[l,"RCA"],[u,g]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[c,[l,"Dell"],[u,g]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[c,[l,"Verizon"],[u,g]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[l,"Barnes & Noble"],c,[u,g]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[c,[l,"NuVision"],[u,g]],[/android.+;\s(k88)\sbuild/i],[c,[l,"ZTE"],[u,g]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[c,[l,"Swiss"],[u,m]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[c,[l,"Swiss"],[u,g]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[c,[l,"Zeki"],[u,g]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[l,"Dragon Touch"],c,[u,g]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[c,[l,"Insignia"],[u,g]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[c,[l,"NextBook"],[u,g]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[l,"Voice"],c,[u,m]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[l,"LvTel"],c,[u,m]],[/android.+;\s(PH-1)\s/i],[c,[l,"Essential"],[u,m]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[c,[l,"Envizen"],[u,g]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[l,c,[u,g]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[c,[l,"MachSpeed"],[u,g]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[l,c,[u,g]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[c,[l,"Rotor"],[u,g]],[/android.+(KS(.+))\s+build/i],[c,[l,"Amazon"],[u,g]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[l,c,[u,g]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[u,b.lowerize],l,c],[/[\s\/\(](smart-?tv)[;\)]/i],[[u,v]],[/(android[\w\.\s\-]{0,9});.+build/i],[c,[l,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[f,[d,"EdgeHTML"]],[/webkit\/537\.36.+chrome\/(?!27)/i],[[d,"Blink"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[d,f],[/rv\:([\w\.]{1,9}).+(gecko)/i],[f,d]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[d,f],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[d,[f,x.str,k.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[d,"Windows"],[f,x.str,k.os.windows.version]],[/\((bb)(10);/i],[[d,"BlackBerry"],f],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[d,f],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[d,"Symbian"],f],[/\((series40);/i],[d],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[d,"Firefox OS"],f],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[d,f],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[d,"Chromium OS"],f],[/(sunos)\s?([\w\.\d]*)/i],[[d,"Solaris"],f],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[d,f],[/(haiku)\s(\w+)/i],[d,f],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[f,/_/g,"."],[d,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[d,"Mac OS"],[f,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[d,f]]},_=function(e,i){"object"===("undefined"==typeof e?"undefined":n(e))&&(i=e,e=void 0);var o=e||(window&&window.navigator&&window.navigator.userAgent?window.navigator.userAgent:t),r=i?b.extend(E,i):E;return this.getBrowser=function(){var e={name:void 0,version:void 0};return x.rgx.call(e,o,r.browser),e.major=b.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return x.rgx.call(e,o,r.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return x.rgx.call(e,o,r.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return x.rgx.call(e,o,r.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return x.rgx.call(e,o,r.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return o},this.setUA=function(e){return o=e,this},this};_.VERSION=e,_.BROWSER={NAME:d,MAJOR:s,VERSION:f},_.CPU={ARCHITECTURE:h},_.DEVICE={MODEL:c,VENDOR:l,TYPE:u,CONSOLE:p,MOBILE:m,SMARTTV:v,TABLET:g,WEARABLE:w,EMBEDDED:y},_.ENGINE={NAME:d,VERSION:f},_.OS={NAME:d,VERSION:f};var S=function(e){if(!e)return"";var t=e.split("."),i="";return t.length>0&&(i+=t[0]),t.length>1&&(i+="."+t[1]),i},T=new _,C=T.getResult(),A={},O=navigator.language||navigator.browserLanguage||navigator.systemLanguage||navigator.userLanguage||"",N="",I="",L=O.indexOf("-");L>0&&(N=O.substr(L+1).toUpperCase(),O=O.substr(0,L),I=O+"_"+N);var P=navigator.userAgent.toLocaleLowerCase();if(null!=P.match(/chrome/)){var M=function(e,t){var i=navigator.mimeTypes;for(var n in i)if(i[n][e]==t)return!0;return!1},D=M("type","application/vnd.chromium.remoting-viewer");D&&(C.browser.name="360")}if("iOS"==C.os.name?C.os.name="iPhone OS":"Android"==C.os.name?C.os.name="google_android":"Windows"==C.os.name&&"mobile"!=C.device.type?C.device.type="PC":"Mac OS"==C.os.name&&"mobile"!=C.device.type&&(C.device.type="Mac"),"Mobile Safari"==C.browser.name?C.browser.name="Safari":"IEMobile"==C.browser.name?C.browser.name="IE":"Opera Mini"==C.browser.name&&(C.browser.name="Opera"),A={sdk_api_version:"2.0",sdk_version:"5.7.0",OS:C.os.name||"",os_version:S(C.os.version),os_version_name:C.os.version||"",device_model:C.device.model||navigator.platform||"",country:N,language:O,locale:I,display_height:window.innerHeight||document.documentElement.clientHeight,display_width:window.innerWidth||document.documentElement.clientWidth,device_type:C.device.type||"",device_vendor:C.device.vendor||"",url:window.location.href,referrer:document.referrer,browser:C.browser.name||"",browser_version:S(C.browser.version),browser_version_name:C.browser.version||"",browser_engine:C.engine.name||"",source:""},!C.browser.name||!C.browser.version||!C.engine.name){var R=C.ua.match(/(bot|crawl|slurp|spider)/i);R&&(A.browser="__spider__")}F=A}();var U=F,q=function(e){U.source=e},K=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},B="ADHOC_MEMBERSHIP_CLIENT_ID",H=function(){function e(t,n,r){i(this,e);try{var a=N.get(B);if(r){var s=I.getCookies(B);I.delCookies(s,B,r)}this.id=o(n)?n:o(a)?a:K(),o(n)||o(a)||N.removeItem("ADHOC_EXP_INFO_"+t),o(n)&&o(a)&&n!=a&&N.removeItem("ADHOC_EXP_INFO_"+t),N.set(B,this.id,"",r)}catch(c){m(c)}}return e.prototype.getId=function(){return this.id},e.prototype.update=function(e){o(e)?this.id=e:null},e}(),z=function(i){return new x(function(n,o){try{e._adhoc_config_env_="production",e._adhoc_md5_=i;var r=t.createElement("script");r.onload=function(){n("editor ready")},r.onerror=function(){o("load editor failed")},r.setAttribute("charset","utf-8"),r.src=e.setAbtestingEditorUrl||"https://sdk.appadhoc.com/editor/adhoc-editor.js?v="+(new Date).getTime();var a=t.getElementsByTagName("head")[0];a.appendChild(r)}catch(s){o(s)}})},V=function(){function e(t){i(this,e),this.expList=[],this.usedFlagMap={},this.onMatch=t,this.use=h(this.use,this)}return e.prototype.setExpList=function(e){this.expList=e},e.prototype.use=function(e){var t=this;this.usedFlagMap.hasOwnProperty(e)||(this.usedFlagMap[e]=!0,w.each(this.expList,function(e,i){if(!l(e))return!0;var n=!0;w.each(e.flags,function(e){if(!t.usedFlagMap.hasOwnProperty(e))return n=!1,!1}),a(n)&&t.expList[i]&&t.onMatch(t.expList.splice(i,1)[0])}))},e}(),X=function(){function t(n){var r=this;i(this,t);var a=n.appKey,c=n.clientId,d=n.custom,u=n.onMatch,l=n.defaultFlags,f=n.noStorage,h=n.experimentCache;this.matchedExpIdsList=[],this.matchedExpsList=[],this.adhocMatchExp=new V(function(e){r.matchedExpIdsList.push(e.id),r.matchedExpsList.push(e),u(e)}),this.promise=new x(function(i,n){try{var r="ADHOC_EXP_INFO_"+a,u=N.getItem(r),p=!1;if(h&&o(u)&&s(f))try{var g=v.parse(e.decodeURIComponent(u));i(g),p=!0}catch(w){m(w)}E({url:window.__ADHOC_EXP_URL__||t.protocol+"//experiment."+t.domain+"/get_flags_async",data:{app_key:a,client_id:c,summary:U,custom:d},timeout:t.timeout}).then(function(t){var n=v.parse(t);s(p)&&(p=!0,i(n)),s(f)&&N.setItem(r,e.encodeURIComponent(t))})["catch"](function(e){s(p)&&(i({experiments:[],flags:l}),p=!0)})}catch(w){i({experiments:[],flags:l})}}).then(function(e){return r.adhocMatchExp.setExpList(e.experiments),{expInfoOrigin:e,flags:r.expInfo2FlagObj(e)}})["catch"](function(e){return p("get flag failed!\n"+e),{expInfoOrigin:l,flags:r.expInfo2FlagObj({flags:l})}})}return t.prototype.getFlags=function(e){return this.promise.then(function(t){return c(e)&&e(t.flags),t}),this},t.prototype.getMatchedExpIds=function(){return this.matchedExpIdsList},t.prototype.getMatchedExps=function(){return this.matchedExpsList},t.prototype.expInfo2FlagObj=function(e){var t=e.flags,i=this.adhocMatchExp.use;return{get:function(e){return t.hasOwnProperty(e)&&i(e),t[e]},all:function(){return t}}},t}();X.domain="appadhoc.com",X.protocol=e.location.protocol,X.timeout=void 0;var $=function(){function e(t){i(this,e);var n=t.appKey,o=t.clientId,r=t.custom;this.appKey=n,this.clientId=o,
this.custom=r,this.cachedStats=[]}return e.prototype.track=function(e,t,i,o){var r=this;u(t)||(t=[t]),w.each(t,function(t,o){var a=1;"number"==typeof i&&(a=i),"object"===("undefined"==typeof i?"undefined":n(i))&&i.hasOwnProperty("length")&&(a=o<i.length?i[o]:1);var s={key:t,value:a,timestamp:Math.round((new Date).getTime()/1e3),experiment_ids:e};r.cachedStats.push(s)}),c(o)?"":o=function(){},e.length>0?(this.send(e,this.cachedStats,o),this.cachedStats=[]):o("no matchedExpId")},e.prototype.send=function(t,i,n){w.each(i,function(e,n){i[n].experiment_ids=t}),""!=U.OS&&""!=U.browser_engine&&window&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("spider")<0&&E({url:window.__ADHOC_TRACKER_URL__||e.protocol+"//tracker."+e.domain+"/tracker",timeout:e.timeout,data:{app_key:this.appKey,client_id:this.clientId,summary:U,custom:this.custom,stats:i}}).then(function(){n(null)})["catch"](function(e){n(e)})},e}();$.domain="appadhoc.com",$.protocol=e.location.protocol,$.timeout=void 0;var G=function(){function e(){i(this,e);var n=t.createElement("style");n.setAttribute("type","text/css"),r(n.styleSheet)&&n.appendChild(t.createTextNode("")),t.getElementsByTagName("head")[0].appendChild(n),this.s=n,this.hiddenElementMap={}}return e.prototype.update=function(){var e=[];for(var t in this.hiddenElementMap)e.push(t);var i=0==e.length?"":e.join(",")+"{opacity:0 !important; filter:alpha(opacity=0) !important; background:none !important;visibility:hidden !important;}";this.s.styleSheet?this.s.styleSheet.cssText=i:this.s.innerHTML=i},e.prototype.hide=function(){for(var e=this,t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];w.each(i,function(t){e.hiddenElementMap[t]=!0}),this.update()},e.prototype.show=function(){var e=this;try{for(var t=arguments.length,i=Array(t),n=0;n<t;n++)i[n]=arguments[n];0==i.length?this.hiddenElementMap={}:w.each(i,function(t){delete e.hiddenElementMap[t]}),this.update()}catch(o){m(o)}},e.prototype.xPath2Css=function(e){var t=e.match(/\w+(?=\[)/g);if("IE"==U.browser&&Math.floor(U.browser_version)<=8)return t.join(">");var i=e.match(/\d+(?=\])/g),n=[];return w.each(t,function(e,t){n.push(e+":nth-of-type("+(parseInt(i[t])+1)+")")}),n.join(">")},e.prototype.log=function(){console.log(this.s.styleSheet.cssText)},e}(),W=[],Q=function(e,t){w.each(e,function(e){"domXpath"==e.mode?w.each(e.elemId,function(i){!function(e,i){var n=t.xPath2Css(e),a=function s(){var a=P.$(e);if(o(a)){a.setAttribute("data-adhoc-stat","true");var c=a.tagName.toLowerCase(),d=a.getAttribute("type");d?d=d.toLowerCase():null;var u=a.getAttribute("target"),l=a.getAttribute("href");"a"==c&&r(u)&&o(l)&&l.indexOf("http")>-1||"input"==c&&"submit"==d||"input"==c&&"image"==d||"button"==c&&"submit"==d?Y(a,i,W):P.addEvent(a,"click",function(){adhoc("track",i,1,function(){},!0)}),t.show(n)}else setTimeout(s)};setTimeout(a)}(i,e.statName)}):w.each(e.doms,function(i){!function(e,i){var a=function s(){var a=void 0,c=void 0,d=void 0;switch(e.mode){case"domXpath":a=P.$(e.id),c=t.xPath2Css(e.id);break;case"class":d=e.id.split(" "),a=d.length>1?document.querySelectorAll("["+e.mode+"='"+e.id+"']"):P.getDoms("."+e.id),c=d.length>1?"["+e.mode+"='"+e.id+"']":"."+e.id;break;case"id":d=e.id.split(" "),a=d.length>1?document.querySelectorAll("["+e.mode+"='"+e.id+"']"):document.getElementById(e.id),c=d.length>1?"["+e.mode+"='"+e.id+"']":"#"+e.id;break;default:a=document.querySelectorAll("["+e.mode+"='"+e.id+"']"),c="["+e.mode+"='"+e.id+"']"}if(o(a)&&"object"===("undefined"==typeof a?"undefined":n(a))&&void 0!=a.length&&a.length>0||o(a)&&"object"===("undefined"==typeof a?"undefined":n(a))&&void 0==a.length){var u=function(e){var n="data-adhoc-stat-"+i.toLowerCase();if(!e.getAttribute(n)){W.push({name:i,ele:e,track:!1,isDefault:!1}),e.setAttribute(n,i);var a=e.tagName.toLowerCase(),s=e.getAttribute("type");s?s=s.toLowerCase():null;var d=e.getAttribute("target"),u=e.getAttribute("href");"a"==a&&r(d)&&o(u)&&u.indexOf("http")>-1||"input"==a&&"submit"==s||"input"==a&&"image"==s||"button"==a&&"submit"==s?Y(e,i,W):P.addEvent(e,"click",function(){adhoc("track",i,1,function(){},!0)}),t.show(c)}};if(a.length&&a.length>=1)for(var l=0;l<a.length;l++)u(a[l]);else u(a)}else setTimeout(s)};setTimeout(a)}(i,e.statName)})})},J=function(e,t,i){w.each(e,function(e){w.each(e.doms,function(a){!function(e,a){var s=function c(){var s=void 0,d=void 0,u=void 0;if("domXpath"===e.mode,"class"===e.mode)for(var l=0;l<i.length;l++){u=e.id.split(" ");var f=i[l].getAttribute("class"),h=f?f.split(" "):[];(1==h.length&&f==e.id||h.length>=1&&f.indexOf(e.id)>-1)&&(s=i[l],d=u.length>1?"["+e.mode+"='"+e.id+"']":"."+e.id)}if("id"===e.mode)for(var p=0;p<i.length;p++){u=e.id.split(" ");var m=i[p].getAttribute("id"),g=m?m.split(" "):[];(1==g.length&&m==e.id||g.length>=1&&m.indexOf(e.id)>-1)&&(s=i[p],d=u.length>1?"["+e.mode+"='"+e.id+"']":"#"+e.id)}if(e.mode&&e.id)for(var v=0;v<i.length;v++){u=e.id.split(" ");var w=i[v].getAttribute(e.mode),y=w?w.split(" "):[];(1==y.length&&w==e.id||y.length>=1&&w.indexOf(e.id)>-1)&&(s=i[v],d="["+e.mode+"='"+e.id+"']")}if(o(s)&&"object"===("undefined"==typeof s?"undefined":n(s))&&void 0!=s.length&&s.length>0||o(s)&&"object"===("undefined"==typeof s?"undefined":n(s))&&void 0==s.length){var b=function(e){var i="data-adhoc-stat-"+a.toLowerCase();if(!e.getAttribute(i)){W.push({name:a,ele:e,track:!1,isDefault:!1}),e.setAttribute(i,a);var n=e.tagName.toLowerCase(),s=e.getAttribute("type");s?s=s.toLowerCase():null;var c=e.getAttribute("target"),u=e.getAttribute("href");"a"==n&&r(c)&&o(u)&&u.indexOf("http")>-1||"input"==n&&"submit"==s||"input"==n&&"image"==s||"button"==n&&"submit"==s?Y(e,a,W):P.addEvent(e,"click",function(){adhoc("track",a,1,function(){},!0)}),t.show(d)}};if(s.length&&s.length>=1)for(var x=0;x<s.length;x++)b(s[x]);else b(s)}else setTimeout(c)};setTimeout(s)}(a,e.statName)})})},Y=function(i,n,r){var s=o(i.tagName)?i.tagName.toLowerCase():"";i.adhocVisualClicked=!1;var d=function(){try{if(i&&i.dispatchEvent){var e=t.createEvent("MouseEvents");e.initEvent("click",!0,!0),i.dispatchEvent(e)}else i.click();for(var n=0;n<r.length;n++)r[n].isDefault=!1}catch(o){m(o)}};if("a"==s){var u=i.parentNode,l=P.next(i),f=i.cloneNode(!0);f.removeAttribute("onclick"),f.setAttribute("href","javascript:;"),P.addEvent(f,"click",function(t){a(i.adhocVisualClicked)||(o(t)&&c(t.preventDefault)?t.preventDefault():t.returnValue=!1,i.adhocVisualClicked=!0,adhoc("track",n,1,function(){i.adhocVisualClicked=!1;var t=f.getAttribute("href");"javascript:;"==t?d():e.location.href=t},!0))}),u.removeChild(i),u.insertBefore(f,l)}else{var h=P.findParentNodeByTag(i,"form");if(o(h)){var p=null;P.addEvent(i,"click",function(){p=i}),P.addEvent(h,"submit",function(e){if(!a(i.adhocVisualClicked)&&p==i){i.adhocVisualClicked=!0;for(var t=0;t<r.length;t++)if(r[t].name==n&&r[t].ele==i&&!r[t].track){o(e)&&c(e.preventDefault)?e.preventDefault():e.returnValue=!1;for(var s=[],u=0;u<r.length;u++)r[u].ele==i&&(s.push(r[u].name),r[u].track=!0);s.length>0&&!r[t].isDefault&&adhoc("track",s,1,function(){for(var e=0;e<r.length;e++)r[e].isDefault=!0;d(),i.adhocVisualClicked=!1;for(var t=0;t<r.length;t++)r[t].ele==i&&(r[t].track=!1)},!0);break}}})}else P.addEvent(i,"click",function(){adhoc("track",n,1,function(){},!0)})}},Z=function(e,t){w.each(e,function(e){ie(ee(e.changes),t)})},ee=function(e){for(var t=e.slice(),i=[],n=0,o=e.length;n<o;n++){for(var r=t[n],a=!1,s=n+1;s<o;s++){var c=t[s];if("src"==c.key&&"src"==r.key&&c.id==r.id&&c.type==r.type&&c.mode==r.mode){a=!0;break}}a||i.push(r)}return i},te=void 0,ie=function(e,t){var i=[];w.each(e,function(e){!function(e){var n=void 0,o=function a(){var o=void 0,s=void 0;switch(e.mode){case"domXpath":o=P.$(e.id),n=t.xPath2Css(e.id);break;case"class":s=e.id.split(" "),o=s.length>1?document.querySelectorAll("["+e.mode+"='"+e.id+"']"):P.getDoms("."+e.id),n=s.length>1?"["+e.mode+"='"+e.id+"']":"."+e.id;break;case"id":s=e.id.split(" "),o=s.length>1?document.querySelectorAll("["+e.mode+"='"+e.id+"']"):document.getElementById(e.id),n=s.length>1?"["+e.mode+"='"+e.id+"']":"#"+e.id;break;default:o=document.querySelectorAll("["+e.mode+"='"+e.id+"']"),n="["+e.mode+"='"+e.id+"']"}if(r(o)||u(o)&&0==o.length||0==o.length)return void(te=setTimeout(a));var c=function(t){switch(e.type){case"attr":if(t.tagName&&"img"==t.tagName.toLowerCase()&&"src"==e.key.toLowerCase()){var n=void 0;i.indexOf(t)==-1&&(n=t.style.visibility),t.style.visibility="hidden",i.push(t);var o=new Image;o.onload=function(){t.setAttribute("src",e.val),setTimeout(function(){t.style.visibility=n},100),t.onload=function(){t.getAttribute("src")!=e.val&&t.setAttribute("src",e.val)}},o.onerror=function(){t.style.visibility=n},o.src=e.val}else t.setAttribute(e.key,e.val);break;case"html":t.outerHTML=e.val;break;case"text":P.isChildsOnlyText(t)?t.innerHTML=e.val:t.innerText=e.val;break;case"style":var a=void 0;"ie"==U.browser.toLowerCase()&&"7.0"==U.browser_version?(a=t.style.cssText||"",t.style.cssText=a+";"+e.val):(a=t.getAttribute("style")||"",t.setAttribute("style",a+";"+e.val));break;case"drag":var s=P.$(e.val),c=s.parentNode;"after"==e.key&&(s=P.next(s)),c.insertBefore(t,s);break;case"sequence":u(e.val)&&(w.each(P.getChildren(t),function(e,i){e&&(r(e.getAttribute(R))&&e.setAttribute(R,i),r(e.getAttribute(j))&&w.each(P.getChildren(t,e.tagName.toLowerCase()),function(e,t){r(e.getAttribute(j))&&e.setAttribute(j,t)}))}),w.each(e.val.reverse(),function(e){var i=P.getChildren(t);i[e]&&r(i[e].getAttribute(R))?t.insertBefore(i[e],i[0]):w.each(i,function(n){n.getAttribute(R)==e&&t.insertBefore(n,i[0])})}))}};if(o.length&&o.length>=1)for(var d=0;d<o.length;d++)c(o[d]);else c(o);t.show(n)};setTimeout(o)}(e)})},ne=function(e,t,i){w.each(e,function(e){oe(ee(e.changes),t,i)})},oe=function(e,t,i){var n=[];w.each(e,function(e){!function(e){var o=void 0,a=function s(){var a=void 0,c=void 0;if("domXpath"===e.mode,"class"===e.mode)for(var d=0;d<i.length;d++){c=e.id.split(" ");var l=i[d].getAttribute("class");if(l){var f=l.split(" ");(1==f.length&&l==e.id||f.length>=1&&l.indexOf(e.id)>-1)&&(a=i[d],o=c.length>1?"["+e.mode+"='"+e.id+"']":"."+e.id)}}if("id"===e.mode)for(var h=0;h<i.length;h++){c=e.id.split(" ");var p=i[h].getAttribute("id");if(p){var m=p.split(" ");(1==m.length&&p==e.id||m.length>=1&&p.indexOf(e.id)>-1)&&(a=i[h],o=c.length>1?"["+e.mode+"='"+e.id+"']":"#"+e.id)}}if(e.mode&&e.id)for(var g=0;g<i.length;g++){c=e.id.split(" ");var v=i[g].getAttribute(e.mode);if(v){var y=v.split(" ");(1==y.length&&v==e.id||y.length>=1&&v.indexOf(e.id)>-1)&&(a=i[g],o="["+e.mode+"='"+e.id+"']")}}if(r(a)||u(a)&&0==a.length||0==a.length)return void setTimeout(s);var b=function(t){switch(e.type){case"attr":if(t.tagName&&"img"==t.tagName.toLowerCase()&&"src"==e.key.toLowerCase()){var i=void 0;n.indexOf(t)==-1&&(i=t.style.visibility),t.style.visibility="hidden",n.push(t);var o=new Image;o.onload=function(){t.setAttribute("src",e.val),setTimeout(function(){t.style.visibility=i},100),t.onload=function(){t.getAttribute("src")!=e.val&&t.setAttribute("src",e.val)}},o.onerror=function(){t.style.visibility=i},o.src=e.val}else t.setAttribute(e.key,e.val);break;case"html":t.outerHTML=e.val;break;case"text":P.isChildsOnlyText(t)?t.innerHTML=e.val:t.innerText=e.val;break;case"style":var a=void 0;"ie"==U.browser.toLowerCase()&&"7.0"==U.browser_version?(a=t.style.cssText||"",t.style.cssText=a+";"+e.val):(a=t.getAttribute("style")||"",t.setAttribute("style",a+";"+e.val));break;case"drag":var s=P.$(e.val),c=s.parentNode;"after"==e.key&&(s=P.next(s)),c.insertBefore(t,s);break;case"sequence":u(e.val)&&(w.each(P.getChildren(t),function(e,i){e&&(r(e.getAttribute(R))&&e.setAttribute(R,i),r(e.getAttribute(j))&&w.each(P.getChildren(t,e.tagName.toLowerCase()),function(e,t){r(e.getAttribute(j))&&e.setAttribute(j,t)}))}),w.each(e.val.reverse(),function(e){var i=P.getChildren(t);i[e]&&r(i[e].getAttribute(R))?t.insertBefore(i[e],i[0]):w.each(i,function(n){n.getAttribute(R)==e&&t.insertBefore(n,i[0])})}))}};if(a.length&&a.length>=1)for(var x=0;x<a.length;x++)b(a[x]);else b(a);t.show(o)};setTimeout(a)}(e)})},re=function(e){var t=new G,i=[],n=[],o=[];w.each(e,function(e){return!!r(e)||(u(e.changes)&&(w.each(e.changes,function(e){"domXpath"==e.mode&&n.push(t.xPath2Css(e.id))}),i.push(e)),void(u(e.stats)&&w.each(e.stats,function(e){"domXpath"==e.mode&&w.each(e.elemId,function(e){n.push(t.xPath2Css(e))}),o.push(e)})))}),t.hide.apply(t,n),Q(o,t),Z(i,t);var a=document.getElementsByTagName("html")[0];a.addEventListener("DOMNodeInserted",function(e){setTimeout(function(){var n=e.target,o=e.target.children,r=n.attributes,a=[];if(r)for(var s=0;s<r.length;s++)a.push({mode:r[s].name,id:r[s].value});if(o&&o.length)for(var c=0;c<o.length;c++)for(var d=o[c].attributes,l=0;l<d.length;l++)a.push({mode:d[l].name,id:d[l].value});var f=[],h=[];w.each(i,function(e){var t=e.changes,i=e.stats;if(u(t)&&t.hasOwnProperty("length"))for(var n=0;n<t.length;n++)for(var o=0;o<a.length;o++)if(a[o].mode==t[n].mode&&a[o].id==t[n].id){f.push(t[n]);break}for(var r=0;r<i.length;r++){var s=i[r].doms,c=[];if(s.hasOwnProperty("length"))for(var d=0;d<s.length;d++)for(var l=0;l<a.length;l++)if(a[l].mode==s[d].mode&&a[l].id==s[d].id){c.push(s[d]);break}h.push({statName:i[r].statName,version:i[r].version,doms:c})}});var p=[{changes:f,stats:i.stats}],m=[n];if(o&&o.length)for(var g=0;g<o.length;g++)m.push(o[g]);var v=!1;if(u(h)&&h.hasOwnProperty("length"))for(var y=0;y<h.length;y++)if(h[y].doms.length>0){v=!0;break}v&&J(h,t,m),f.length>0&&(clearTimeout(te),ne(p,t,m))})},!1)},ae=function(t,i,n,c,d,u){return new x(function(f,h){var p=t.all(),m=ce(i);if(s(m))return h("no referrer in control group");var g=[],w=null;for(var y in p){var b=p[y],x=void 0;try{x=v.parse(b)}catch(k){continue}for(var E in x){var _=x[E];if(!r(_)&&!r(_.mode)){var T="regex"==_.mode?_.regexp:_.url;if(a(ue(m,T,_.mode,d))){var C=e.navigator&&e.navigator.userAgent?e.navigator.userAgent:"";if(o(_.ua)&&s(new RegExp(_.ua,"i").test(C)))continue;var A=_.data||{};if(r(w)&&o(A.newPageUrl)&&i!=we.SPLIT&&""!=A.newPageUrl){if(0!=A.newPageUrl.indexOf("http"))return void h("newPageUrl error!\n"+_.newPageUrl);w={newUrl:A.newPageUrl,originUrl:m}}else t.get(y);g.push(_.data)}}}}if(l(w)){var O=se(w,n,c,u);D.setName(w.originUrl);var N=Math.random();S({active:"replace",clientid:n,newpageurl:O,step:0,id:N}),e.location.replace(O),S({active:"replace",clientid:n,newpageurl:O,step:1,id:N}),setTimeout(function(){S({active:"replace",clientid:n,newpageurl:O,step:3,id:N}),h("redirect failed")},1e3)}else try{re(g),f()}catch(k){h(k)}})},se=function(e,t,i,n){var r=e.newUrl,a=le(r)+("?"+ye.SPLIT+"="+t),c=_.getSearch(r);if(c&&(a+="&"+c.substr(1)),s(i)){var d=_.getSearch(e.originUrl).substr(1).split("&"),u=[];w.each(d,function(e,t){if(o(e)&&e.indexOf("adhoc")>-1||""==e)u.push(e);else if(n.length>0){var i=e.match(/(\S*)=/)[1];n.indexOf(i)==-1?u.push(e):""}}),w.each(u,function(e){var t=d.indexOf(e);t>-1?d.splice(t,1):""}),d.length>0?a+="&"+d.join("&"):null}var l=_.getHash(r);return"#"==l?l="":"",a+=l},ce=function(t){var i=void 0;if(t==we.SPLIT){if(i=D.getName(),!i||i.indexOf("http")<0)return!1}else i=e.location.href;var n=_.getProtocol(i),o=_.getHost(i),r=_.getPath(i),a=_.getHash(i),s=_.getSearch(i),c="";if(s.length>0&&0==s.indexOf("?")){var d=s.substr(1).split("&"),u=d.length;w.each(d,function(e,t){return""==e||e.indexOf("adhoc_force_client_id")>=0||(c+=e,void(t<u-1&&(c+="&")))}),c.length>0&&(c="?"+c)}return n+"//"+o+r+c+a},de=function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},ue=function(e,t,i,n){switch(e=de(e),t=de(t),i){case"regex":return new RegExp(t.replace("?","\\?").replace(/\*/g,"\\S*")+"$").test(e);case"equal":if(a(n)){if(le(t)==le(e)&&_.getHash(t)==_.getHash(e)){var o="&"+_.getSearch(e).substr(1)+"&",r=_.getSearch(t).substr(1).split("&"),s=!0;return w.each(r,function(e){return""==e||(o.indexOf("&"+e+"&")<0?(s=!1,!1):void 0)}),s}return!1}if(t.indexOf("?")>-1||t.indexOf("#")>-1){var c=_.getProtocol(e)+_.getHost(e)+_.getPath(e)+_.getSearch(e)+_.getHash(e),d=_.getProtocol(t)+_.getHost(t)+_.getPath(t)+_.getSearch(t)+_.getHash(t);return c==d}return le(e)==le(t)}},le=function(e){return _.getProtocol(e)+"//"+_.getHost(e)+_.getPath(e)},fe="ADHOC_CROSS_PAGE_EXPIDS",he=1800,pe=function(){function e(t,n){i(this,e);var o=N.get(fe)||"[]";this.ids=v.parse(o),this.domain=t,this.duration=n||he}return e.prototype.getCrossExpIds=function(){return this.ids},e.prototype.concatExp=function(e){var t=this;return w.each(e,function(e){w.uniquePush(t.ids,e)}),this.ids},e.prototype.save=function(e){w.uniquePush(this.ids,e),N.set(fe,v.stringify(this.ids),this.duration,this.domain)},e}(),me=function(){function e(){i(this,e),this.events={}}return e.prototype.on=function(e,t){this.events.hasOwnProperty(e)||(this.events[e]=[]),this.events[e].push(t)},e.prototype.trigger=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.shift(),o=this.events[n];if(void 0!=o)for(var r=0;r<o.length;r++)o[r].apply(null,t)},e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e}(),ge=me.getInstance(),ve=function(){function e(){i(this,e),this.baseURL=window.adhoc_domain_snapshot_api||"https://h5.appadhoc.com",this.isForbiddenSnap=window.adhoc_domain_isForbiddenSnap||!1}return e.prototype.snap=function(e,t){if(console.log("进入方法"),this.isForbiddenSnap)return null;var i=this.baseURL+"/verSnapshot?url="+encodeURIComponent(e)+"&type=web&name="+t,n={url:encodeURIComponent(e),type:"web",name:t};try{var r=new window.XMLHttpRequest;"withCredentials"in r||o(window.XDomainRequest)&&(r=new window.XDomainRequest,i=i.replace(/http\w*\:/,window.location.protocol)),r.open("GET",i,!0),c(r.setRequestHeader)?r.setRequestHeader("Content-Type","application/json;charset=UTF-8;"):"",r.send(v.stringify(n))}catch(a){console.log(a)}},e}(),we={EDITOR:"editor",SPLIT:"split",FORCE_CLIENT:"force_client",NORMAL:"normal"},ye={SPLIT:"__adhoc_split_id__",FORCE_CLIENT:"adhoc_force_client_id",APP_KEY:"appKey"},be=function(){function t(){i(this,t),this.appKey=void 0,this.client=void 0,this.mode=void 0,this.exp=void 0,this.tracker=void 0,this.style=new G,this.crossExp=void 0,this.event=ge,this.experimentCache=void 0,this.urlKeys=[]}return t.prototype.init=function(t){var i={appKey:void 0,clientId:void 0,defaultFlags:{},custom:{},stopUrlParams:!1,filterUrlParams:!1,protocol:e.location.protocol,domain:"appadhoc.com",timeout:3e3,crossDomain:void 0,crossDomainDuration:void 0,experimentCache:!0,urlKeys:[],clientIdDomain:void 0,sourceKey:void 0};if(this.trimStr(t),y.assign(i,t),r(i.appKey))return m("adhoc needs an appKey, get it from your abtesting web console please");if(o(this.appKey))return m("please just init adhoc once");this.appKey=i.appKey,this.client=new H(i.appKey,i.clientId,i.clientIdDomain),this.custom=i.custom||{},this.defaultFlags=l(i.defaultFlags)?i.defaultFlags:{},this.stopUrlParams=!!i.stopUrlParams,this.filterUrlParams=!!i.filterUrlParams,this.crossDomain=i.crossDomain,this.experimentCache=i.experimentCache,this.urlKeys=i.urlKeys,this.clientIdDomain=i.clientIdDomain,this.sourceKey=i.sourceKey,this.crossExp=new pe(this.crossDomain,i.crossDomainDuration),X.domain=$.domain=i.domain,X.protocol=$.protocol=i.protocol,X.timeout=$.timeout=i.timeout,this.setOverlay(!0),this.sourceKey&&_.getQueryString(this.sourceKey)&&q(_.getQueryString(this.sourceKey));var n=_.getQueryString(ye.SPLIT),a=_.getQueryString(ye.FORCE_CLIENT),s=/openSDK/.test(D.getName())?we.EDITOR:n?we.SPLIT:a?we.FORCE_CLIENT:we.NORMAL;switch(this.mode=s,s){case we.EDITOR:_.getQueryString(ye.APP_KEY,D.getName())===this.appKey?(this.setOverlay(!1),z(this.appKey)["catch"](function(e){m("init editor failed! \n "+e)})):(this.setOverlay(!1),alert("appkey error"));break;case we.SPLIT:this.initSDK(n);break;case we.FORCE_CLIENT:this.initSDK(a);break;case we.NORMAL:default:this.initSDK()}},t.prototype.initSDK=function(e){var t=this,i=this.mode==we.FORCE_CLIENT;this.mode==we.SPLIT&&D.getName().indexOf("force_client_id")>0&&(i=!0),o(e)?this.client.update(e):"",this.exp=new X({appKey:this.appKey,clientId:this.client.getId(),custom:this.custom,noStorage:i,experimentCache:this.experimentCache,defaultFlags:this.defaultFlags,onMatch:function(e){t.event.trigger("MatchExperiment",e),t.tracker.track([e.id],"Event-GET_EXPERIMENT_FLAGS",1),console.log("查看"),console.log(e),i&&e.flags[0]&&(console.log("001"),(new ve).snap(window.location.href,e.id.match(/debug-(\S*)/)[1]),console.log("002")),t.event.trigger("Track",{statname:"PV",expids:[e.id],value:1}),t.crossDomain&&t.crossExp.save(e.id)}}).getFlags(function(e){ae(e,t.mode,t.client.getId(),t.stopUrlParams,t.filterUrlParams,t.urlKeys).then(function(){t.setOverlay(!1),t.event.trigger("rander")})["catch"](function(e){t.event.trigger("rander"),t.setOverlay(!1),m(e)})}),this.tracker=new $({appKey:this.appKey,clientId:this.client.getId(),custom:this.custom})},t.prototype.trimStr=function(e){for(var t in e)e[t]=f(e[t])?e[t].replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""):e[t]},t.prototype.getFlags=function(e){o(this.exp)?this.exp.getFlags(function(t){c(e)&&e(t)}):m("please try:\n\tadhoc('init', {appKey: 'your adhoc appKey'})")},t.prototype.track=function(e,t,i){if(o(this.tracker)){var n=this.crossExp.concatExp(this.exp.getMatchedExpIds());this.tracker.track(n,e,t,i),n&&0!=n.length&&this.event.trigger("Track",{statname:e,expids:n,value:t})}else c(i)?i("no matchedExpId"):"",m("please try:\n\tadhoc('init', {appKey: 'your adhoc appKey'})")},t.prototype.getMatchedExpIds=function(){return this.exp.getMatchedExpIds()},t.prototype.getMatchedExps=function(){return this.exp.getMatchedExps()},t.prototype.getCurClientId=function(){return this.client.id},t.prototype.corssTrack=function(e,t,i,n){var o=new $({appKey:e.appKey,clientId:e.clientId,custom:e.custom||{}});o.track(e.expids,t,i,n)},t.prototype.testChangeData=function(e){re(e)},t.prototype.setOverlay=function(e){e||(this.setOverlay=function(){}),this.style[e?"hide":"show"]("*","body")},t.prototype.on=function(e,t){this.event.on(e,t)},t}();!function(){var e=void 0;be.getInstance=function(t){return r(e)&&(e=new be),e}}();var xe=be.getInstance(),ke=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var n=t.shift();try{if(r(n))return p("apiName is not defined");if("track"==n){var o=t[0],s=(new Date).getTime();if(a(t[3]));else{if(d(Te[o])&&s-Te[o]<3e3)throw new Error("please do not track one stat frequently");Te[o]=s}}switch(n){case"initSDK":break;case"show":return _e.apply(void 0,t);case"hide":return Se.apply(void 0,t);default:if(r(this[n]))throw new Error("api: "+n+" is not exist");return this[n].apply(this,t)}}catch(c){m(c)}},Ee=new G,_e=function(){Ee.show.apply(Ee,arguments)},Se=function(){Ee.hide.apply(Ee,arguments)},Te={},Ce=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return ke.apply(xe,t)};e.adhoc=Ce,e.adhoc.init=function(e,t){adhoc("init",{appKey:e,clientId:t})},P.querySelectorPolyfill(),e.adhoc.version="5.7.0"}(window,document),t["true"]=e}({},function(){return this}());
